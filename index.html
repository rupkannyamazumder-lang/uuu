<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medora | Your PCOS Sanctuary</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;500;700&family=Playfair+Display:ital,wght@0,700;1,700&display=swap" rel="stylesheet">
    <style>
        :root {
            --sage: #9fb8ad;
            --blush: #f2d5d5;
            --teal: #8fb9b9;
            --lavender: #dcd6f7;
            --berry: #8b0000;
            --deep-navy: #1a2632;
            --glass: rgba(255, 255, 255, 0.9);
            --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
        }

        * { box-sizing: border-box; transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94); }
        
        body {
            margin: 0; font-family: 'Quicksand', sans-serif;
            background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);
            color: #444; overflow-x: hidden;
        }

        /* --- NAVIGATION --- */
        nav {
            background: var(--glass); backdrop-filter: blur(10px);
            padding: 0.8rem 5%; display: flex; justify-content: space-between;
            align-items: center; position: sticky; top: 0; z-index: 1000;
            box-shadow: 0 2px 15px rgba(0,0,0,0.05);
        }
        .logo { 
            font-family: 'Playfair Display', serif; 
            font-size: 2rem; color: var(--berry); font-weight: 700;
        }
        .nav-links { display: flex; gap: 8px; flex-wrap: wrap; }
        .nav-links button {
            background: transparent; border: 1px solid var(--sage); color: var(--deep-navy);
            padding: 8px 16px; border-radius: 50px; cursor: pointer; font-size: 0.85rem; font-weight: 500;
        }
        .nav-links button:hover, .nav-links button.active-nav { 
            background: var(--sage); color: white; border-color: var(--sage);
        }

        /* --- LAYOUT --- */
        .container { min-height: 90vh; padding: 40px 20px; max-width: 1200px; margin: auto; }
        .page { display: none; animation: slideUp 0.6s ease-out; }
        .active { display: block; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

        /* --- CARDS & UI SHAPES --- */
        .card { 
            background: var(--glass); border-radius: 30px; padding: 35px; 
            box-shadow: var(--shadow); margin-bottom: 25px; border: 1px solid rgba(255,255,255,0.3);
        }
        .info-note {
            background: rgba(143, 185, 185, 0.15); border-left: 5px solid var(--teal);
            padding: 15px; border-radius: 10px; font-size: 0.9rem; margin: 15px 0;
        }
        .hero-title { font-family: 'Playfair Display', serif; font-size: 2.5rem; color: var(--berry); margin-bottom: 10px; }

        /* --- INPUTS & BUTTONS --- */
        input, select, textarea { 
            width: 100%; padding: 14px; border-radius: 15px; border: 1px solid #ddd; 
            margin-top: 10px; background: white; font-size: 1rem; outline: none;
        }
        input:focus { border-color: var(--teal); box-shadow: 0 0 10px rgba(143, 185, 185, 0.2); }
        .btn { 
            background: var(--berry); color: white; border: none; padding: 15px 40px; 
            border-radius: 50px; font-weight: 700; cursor: pointer; display: block; 
            margin: 20px auto; font-size: 1rem;
        }
        .btn:hover { transform: scale(1.05); box-shadow: 0 10px 20px rgba(139, 0, 0, 0.2); }

        /* --- SYMPTOM GRID --- */
        .symp-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin: 20px 0; }
        .symp-item { 
            padding: 15px; border-radius: 20px; background: white; border: 1px solid #eee;
            text-align: center; cursor: pointer; font-weight: 500;
        }
        .symp-item.selected { background: var(--blush); border-color: var(--berry); }

        /* --- CHAT UI --- */
        #chat-window { height: 400px; overflow-y: auto; background: #fafafa; border-radius: 25px; padding: 25px; border: 1px solid #eee; display: flex; flex-direction: column; gap: 15px; }
        .bot { align-self: flex-start; background: var(--teal); color: white; padding: 15px; border-radius: 20px 20px 20px 5px; max-width: 80%; }
        .user { align-self: flex-end; background: var(--lavender); color: var(--deep-navy); padding: 15px; border-radius: 20px 20px 5px 20px; max-width: 80%; }

        /* --- OVERLAYS --- */
        #safety-overlay { display: none; position: fixed; inset: 0; background: rgba(26, 38, 50, 0.97); z-index: 2000; color: white; display: none; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
        .breath-circle { width: 150px; height: 150px; background: var(--teal); border-radius: 50%; margin: 50px; animation: breathe 4s infinite ease-in-out; box-shadow: 0 0 50px var(--teal); }
        @keyframes breathe { 0%, 100% { transform: scale(1); opacity: 0.6; } 50% { transform: scale(2.2); opacity: 1; } }

        /* --- DASHBOARD WIDGETS --- */
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 30px; }
        .stat-card { background: white; padding: 20px; border-radius: 25px; text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .stat-val { font-size: 1.8rem; font-weight: 700; color: var(--berry); display: block; }
    </style>
</head>
<body>

<nav>
    <div class="logo">medora.</div>
    <div class="nav-links">
        <button onclick="showPage('p1')" id="btn-p1">Dashboard</button>
        <button onclick="showPage('p2')" id="btn-p2">Identity</button>
        <button onclick="showPage('p3')" id="btn-p3">Cycle</button>
        <button onclick="showPage('p4')" id="btn-p4">Vitality</button>
        <button onclick="showPage('p5')" id="btn-p5">Analysis</button>
        <button onclick="showPage('p7')" id="btn-p7">AI Expert</button>
    </div>
</nav>

<div id="safety-overlay">
    <h1 class="hero-title" style="color: white;">Breathe with Medora</h1>
    <p>Everything is going to be okay. Just focus on the rhythm.</p>
    <div class="breath-circle"></div>
    <button class="btn" onclick="closeSafety()">I feel grounded</button>
</div>

<div class="container">

    <section id="p1" class="page active">
        <h1 class="hero-title">Welcome Back, <span id="display-name">Warrior</span></h1>
        <p class="stylish-p">"Your body is a sanctuary, not a battlefield."</p>
        
        <div class="info-note">
            
            <b>Knowledge Bite:</b> PCOS is a <i>metabolic</i> condition as much as a hormonal one. Managing insulin is your superpower.
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <span class="stat-val" id="dash-steps">0</span>
                <span>Steps Today</span>
            </div>
            <div class="stat-card">
                <span class="stat-val" id="dash-water">0</span>
                <span>Glasses Hydrated</span>
            </div>
            <div class="stat-card">
                <span class="stat-val" id="dash-cycle">--</span>
                <span>Days to Period</span>
            </div>
        </div>
    </section>

    <section id="p2" class="page">
        <div class="card">
            <h2 class="hero-title">Identity Flow</h2>
            <p>Sync your biological data to personalize your sanctuary.</p>
            <input type="text" id="pName" placeholder="What should we call you?" oninput="updateName(this.value)">
            <div style="display: flex; gap: 15px;">
                <input type="number" id="pHeight" placeholder="Height (cm)">
                <input type="number" id="pWeight" placeholder="Weight (kg)">
            </div>
            <select id="pMood" onchange="checkMood(this.value)">
                <option value="stable">Mood: Stable</option>
                <option value="joyful">Mood: Energetic</option>
                <option value="verylow">Mood: Very Low / Anxious</option>
            </select>
            <button class="btn" onclick="saveIdentity()">Sync Identity</button>
        </div>
    </section>

    <section id="p3" class="page">
        <div class="card">
            <h2 class="hero-title">Cycle Harmony</h2>
            

[Image of the four phases of the menstrual cycle: menstrual, follicular, ovulatory, and luteal]

            <div class="info-note">
                <b>Knowledge Bite:</b> In PCOS, cycles are often longer (35+ days). Tracking helps identify your unique "Normal."
            </div>
            <p>When did your last period start?</p>
            <input type="date" id="lastDate">
            <button class="btn" onclick="predictPeriod()">Calculate Prediction</button>
            <div id="periodOut" style="text-align: center; font-size: 1.2rem; font-weight: 700; color: var(--berry); margin-top: 20px;"></div>
        </div>
    </section>

    <section id="p4" class="page">
        <div class="card">
            <h2 class="hero-title">Vitality Rituals</h2>
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <label>üö∂ Steps (Sync with HealthKit):</label>
                <button class="btn" style="margin:0; padding: 8px 15px; font-size: 0.8rem;" onclick="syncSteps()">Sync Phone</button>
            </div>
            <input type="number" id="pSteps" placeholder="Steps taken...">
            
            <label style="display:block; margin-top: 20px;">üíß Water Intake (Glasses):</label>
            <input type="number" id="pWater" placeholder="Number of glasses...">
            
            <label style="display:block; margin-top: 20px;">‚úçÔ∏è Daily Reflection:</label>
            <textarea id="pJournal" rows="4" placeholder="How does your body feel today?"></textarea>
            
            <button class="btn" onclick="saveVitality()">Log Rituals</button>
        </div>
    </section>

    <section id="p5" class="page">
        <div class="card">
            <h2 class="hero-title">Symptom Analysis</h2>
            [Image showing the relationship between insulin resistance, androgen levels, and PCOS symptoms]
            <p>Select the symptoms you are currently noticing:</p>
            <div class="symp-grid" id="sympGrid">
                <div class="symp-item" onclick="toggleSymp(this)">Acne</div>
                <div class="symp-item" onclick="toggleSymp(this)">Thinning Hair</div>
                <div class="symp-item" onclick="toggleSymp(this)">Unwanted Hair</div>
                <div class="symp-item" onclick="toggleSymp(this)">Irregular Period</div>
                <div class="symp-item" onclick="toggleSymp(this)">Fatigue</div>
                <div class="symp-item" onclick="toggleSymp(this)">Brain Fog</div>
            </div>
            <button class="btn" onclick="runAnalysis()">Analyze Trends</button>
            <div id="riskOut" class="info-note" style="display:none;"></div>
        </div>
    </section>

    <section id="p7" class="page">
        <h2 class="hero-title">Medora AI Expert</h2>
        <div id="chat-window">
            <div class="bot">Hello. I am Medora, your specialized AI support. Ask me about nutrition, fertility, or hormone balance.</div>
        </div>
        <div style="display: flex; gap: 10px; margin-top: 15px;">
            <input type="text" id="uMsg" placeholder="Ask Medora anything...">
            <button class="btn" style="margin: 0; padding: 10px 25px;" onclick="askAI()">Ask</button>
        </div>
    </section>

</div>

<script>
    // --- APP CORE ---
    let userData = JSON.parse(localStorage.getItem('medoraData')) || {
        name: 'Warrior',
        steps: 0,
        water: 0,
        lastPeriod: ''
    };

    window.onload = () => {
        document.getElementById('display-name').innerText = userData.name;
        document.getElementById('dash-steps').innerText = userData.steps;
        document.getElementById('dash-water').innerText = userData.water;
        updatePeriodCountdown();
    };

    function showPage(id) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.nav-links button').forEach(b => b.classList.remove('active-nav'));
        document.getElementById(id).classList.add('active');
        document.getElementById('btn-' + id).classList.add('active-nav');
        window.scrollTo({top: 0, behavior: 'smooth'});
    }

    // --- IDENTITY FUNCTIONS ---
    function updateName(val) {
        userData.name = val || 'Warrior';
        document.getElementById('display-name').innerText = userData.name;
    }

    function saveIdentity() {
        localStorage.setItem('medoraData', JSON.stringify(userData));
        alert("Your profile has been synced securely.");
        showPage('p1');
    }

    // --- VITALITY FUNCTIONS ---
    function syncSteps() {
        const fakeSteps = Math.floor(Math.random() * 8000) + 2000;
        document.getElementById('pSteps').value = fakeSteps;
        alert("Health data pulled from your device.");
    }

    function saveVitality() {
        userData.steps = document.getElementById('pSteps').value || 0;
        userData.water = document.getElementById('pWater').value || 0;
        localStorage.setItem('medoraData', JSON.stringify(userData));
        document.getElementById('dash-steps').innerText = userData.steps;
        document.getElementById('dash-water').innerText = userData.water;
        alert("Rituals saved to your dashboard.");
        showPage('p1');
    }

    // --- CYCLE FUNCTIONS ---
    function predictPeriod() {
        const input = document.getElementById('lastDate').value;
        if(!input) return;
        userData.lastPeriod = input;
        localStorage.setItem('medoraData', JSON.stringify(userData));
        
        let date = new Date(input);
        date.setDate(date.getDate() + 32); // Default PCOS estimate
        document.getElementById('periodOut').innerText = `Expected Next Window: ${date.toDateString()}`;
        updatePeriodCountdown();
    }

    function updatePeriodCountdown() {
        if(!userData.lastPeriod) return;
        let next = new Date(userData.lastPeriod);
        next.setDate(next.getDate() + 32);
        let diff = Math.ceil((next - new Date()) / (1000 * 60 * 60 * 24));
        document.getElementById('dash-cycle').innerText = diff > 0 ? diff : 'Soon';
    }

    // --- ANALYSIS FUNCTIONS ---
    function toggleSymp(el) {
        el.classList.toggle('selected');
    }

    function runAnalysis() {
        const count = document.querySelectorAll('.symp-item.selected').length;
        const out = document.getElementById('riskOut');
        out.style.display = 'block';
        if(count >= 4) {
            out.innerHTML = "<b>Trend: Significant Hormonal Activity.</b><br>Focus on anti-inflammatory meals (omega-3s) and consider a cortisol check with a specialist.";
        } else {
            out.innerHTML = "<b>Trend: Moderate/Stable.</b><br>Your rituals are supporting your balance. Keep prioritizing sleep and low-impact movement.";
        }
    }

    // --- MENTAL HEALTH ---
    function checkMood(val) {
        if(val === 'verylow') {
            document.getElementById('safety-overlay').style.display = 'flex';
        }
    }
    function closeSafety() { 
        document.getElementById('safety-overlay').style.display = 'none'; 
        document.getElementById('pMood').value = 'stable';
    }

    // --- AI CHAT ---
    const responses = {
        "inositol": "Inositol (specifically Myo-inositol) is widely researched for PCOS. It can help improve insulin sensitivity and egg quality.",
        "diet": "For PCOS, focus on 'Pairing Carbs with Protein.' This prevents insulin spikes. Think apples with almond butter!",
        "fertility": "Many with PCOS conceive successfully. Key focus areas are tracking ovulation and managing inflammation levels.",
        "exercise": "Strength training is excellent for PCOS as muscle tissue helps burn glucose more efficiently."
    };

    function askAI() {
        const msg = document.getElementById('uMsg').value.toLowerCase();
        const win = document.getElementById('chat-window');
        if(!msg) return;

        win.innerHTML += `<div class="user">${msg}</div>`;
        let reply = "I'm listening. That's a complex topic‚Äîgenerally, focusing on gut health and stress management helps stabilize PCOS symptoms.";
        
        for(let key in responses) {
            if(msg.includes(key)) reply = responses[key];
        }

        setTimeout(() => {
            win.innerHTML += `<div class="bot">${reply}</div>`;
            win.scrollTop = win.scrollHeight;
        }, 600);
        document.getElementById('uMsg').value = "";
    }
</script>
</body>
</html>
